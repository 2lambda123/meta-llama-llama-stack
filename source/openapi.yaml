components:
  responses: {}
  schemas:
    AgenticSystemCreateRequest:
      additionalProperties: false
      properties:
        available_tools:
          items:
            additionalProperties: false
            properties:
              input_shields:
                items:
                  $ref: '#/components/schemas/ShieldConfig'
                type: array
              output_shields:
                items:
                  $ref: '#/components/schemas/ShieldConfig'
                type: array
              parameters:
                additionalProperties:
                  oneOf:
                  - type: 'null'
                  - type: boolean
                  - type: number
                  - type: string
                  - type: array
                  - type: object
                type: object
              tool_name:
                oneOf:
                - enum:
                  - web_search
                  - math
                  - image_gen
                  - code_interpreter
                  type: string
                - type: string
            required:
            - tool_name
            - input_shields
            - output_shields
            type: object
          type: array
        executable_tools:
          items:
            type: string
          type: array
          uniqueItems: true
        input_shields:
          items:
            $ref: '#/components/schemas/ShieldConfig'
          type: array
        instructions:
          type: string
        model:
          enum:
          - llama3_8b_chat
          - llama3_70b_chat
          type: string
        output_shields:
          items:
            $ref: '#/components/schemas/ShieldConfig'
          type: array
      required:
      - instructions
      - model
      - available_tools
      - executable_tools
      - input_shields
      - output_shields
      type: object
    AgenticSystemCreateResponse:
      additionalProperties: false
      properties:
        agent_id:
          type: string
      required:
      - agent_id
      type: object
    AgenticSystemExecuteRequest:
      additionalProperties: false
      properties:
        agent_id:
          type: string
        messages:
          items:
            $ref: '#/components/schemas/Message'
          type: array
        stream:
          default: false
          type: boolean
        turn_history:
          items:
            $ref: '#/components/schemas/AgenticSystemTurn'
          type: array
      required:
      - agent_id
      - messages
      - turn_history
      - stream
      type: object
    AgenticSystemExecuteResponse:
      additionalProperties: false
      properties:
        turn:
          $ref: '#/components/schemas/AgenticSystemTurn'
      required:
      - turn
      title: non-stream response from the agentic system.
      type: object
    AgenticSystemExecuteResponseStreamChunk:
      additionalProperties: false
      properties:
        event_type:
          enum:
          - step_start
          - step_end
          - step_progress
          title: The type of event.
          type: string
        response_text_delta:
          type: string
        retrieved_document:
          additionalProperties: false
          properties:
            content:
              type: string
            index_id:
              type: string
          required:
          - index_id
          - content
          type: object
        step_type:
          enum:
          - model_inference
          - tool_execution
          - safety_filtering
          - memory_retrieval
          title: The type of execution step.
          type: string
        step_uuid:
          type: string
        stop_reason:
          enum:
          - not_stopped
          - finished_ok
          - max_tokens
          title: Stop reasons are used to indicate why the model stopped generating
            text.
          type: string
        tool_call:
          additionalProperties: false
          properties:
            arguments:
              additionalProperties:
                oneOf:
                - type: 'null'
                - type: boolean
                - type: number
                - type: string
                - type: array
                - type: object
              type: object
            tool_name:
              type: string
          required:
          - tool_name
          - arguments
          title: A tool call is a request to a tool.
          type: object
        tool_response_delta:
          additionalProperties: false
          properties:
            response:
              type: string
            tool_name:
              type: string
          required:
          - tool_name
          - response
          type: object
        violation:
          additionalProperties: false
          properties:
            details:
              type: string
            suggested_user_response:
              type: string
            violation_type:
              type: string
          required:
          - violation_type
          - details
          type: object
      required:
      - event_type
      - step_uuid
      - step_type
      title: Streamed agent execution response.
      type: object
    AgenticSystemTurn:
      additionalProperties: false
      properties:
        response_message:
          $ref: '#/components/schemas/Message'
        steps:
          items:
            oneOf:
            - additionalProperties: false
              properties:
                logprobs:
                  additionalProperties:
                    oneOf:
                    - type: 'null'
                    - type: boolean
                    - type: number
                    - type: string
                    - type: array
                    - type: object
                  type: object
                step_type:
                  default: model_inference
                  enum:
                  - model_inference
                  - tool_execution
                  - safety_filtering
                  - memory_retrieval
                  title: The type of execution step.
                  type: string
                text:
                  type: string
                uuid:
                  type: string
              required:
              - step_type
              - uuid
              - text
              type: object
            - additionalProperties: false
              properties:
                step_type:
                  default: tool_execution
                  enum:
                  - model_inference
                  - tool_execution
                  - safety_filtering
                  - memory_retrieval
                  title: The type of execution step.
                  type: string
                tool_calls:
                  items:
                    additionalProperties: false
                    properties:
                      arguments:
                        additionalProperties:
                          oneOf:
                          - type: 'null'
                          - type: boolean
                          - type: number
                          - type: string
                          - type: array
                          - type: object
                        type: object
                      tool_name:
                        type: string
                    required:
                    - tool_name
                    - arguments
                    title: A tool call is a request to a tool.
                    type: object
                  type: array
                tool_responses:
                  items:
                    additionalProperties: false
                    properties:
                      response:
                        type: string
                      tool_name:
                        type: string
                    required:
                    - tool_name
                    - response
                    type: object
                  type: array
                uuid:
                  type: string
              required:
              - step_type
              - uuid
              - tool_calls
              - tool_responses
              type: object
            - additionalProperties: false
              properties:
                step_type:
                  default: safety_filtering
                  enum:
                  - model_inference
                  - tool_execution
                  - safety_filtering
                  - memory_retrieval
                  title: The type of execution step.
                  type: string
                uuid:
                  type: string
                violation:
                  additionalProperties: false
                  properties:
                    details:
                      type: string
                    suggested_user_response:
                      type: string
                    violation_type:
                      type: string
                  required:
                  - violation_type
                  - details
                  type: object
              required:
              - step_type
              - uuid
              type: object
            - additionalProperties: false
              properties:
                documents:
                  items:
                    additionalProperties: false
                    properties:
                      content:
                        type: string
                      index_id:
                        type: string
                    required:
                    - index_id
                    - content
                    type: object
                  type: array
                scores:
                  items:
                    type: number
                  type: array
                step_type:
                  default: memory_retrieval
                  enum:
                  - model_inference
                  - tool_execution
                  - safety_filtering
                  - memory_retrieval
                  title: The type of execution step.
                  type: string
                uuid:
                  type: string
              required:
              - step_type
              - uuid
              - documents
              - scores
              type: object
          type: array
        user_messages:
          items:
            $ref: '#/components/schemas/Message'
          type: array
      required:
      - user_messages
      - steps
      - response_message
      title: A single turn in an interaction with an Agentic System.
      type: object
    Attachment:
      additionalProperties: false
      properties:
        mime_type:
          type: string
        url:
          $ref: '#/components/schemas/URL'
      required:
      - url
      - mime_type
      title: Attachments are used to refer to external resources, such as images,
        videos, audio, etc.
      type: object
    ChatCompletionRequest:
      additionalProperties: false
      properties:
        available_tools:
          items:
            oneOf:
            - enum:
              - web_search
              - math
              - image_gen
              - code_interpreter
              type: string
            - additionalProperties: false
              properties:
                input_shields:
                  items:
                    $ref: '#/components/schemas/ShieldConfig'
                  type: array
                output_shields:
                  items:
                    $ref: '#/components/schemas/ShieldConfig'
                  type: array
                parameters:
                  additionalProperties:
                    oneOf:
                    - type: 'null'
                    - type: boolean
                    - type: number
                    - type: string
                    - type: array
                    - type: object
                  type: object
                tool_name:
                  oneOf:
                  - enum:
                    - web_search
                    - math
                    - image_gen
                    - code_interpreter
                    type: string
                  - type: string
              required:
              - tool_name
              - input_shields
              - output_shields
              type: object
          type: array
        logprobs:
          default: false
          type: boolean
        max_tokens:
          default: 0
          type: integer
        message:
          $ref: '#/components/schemas/Message'
        message_history:
          items:
            $ref: '#/components/schemas/Message'
          type: array
        model:
          enum:
          - llama3_8b_chat
          - llama3_70b_chat
          type: string
        sampling_params:
          additionalProperties: false
          properties:
            strategy:
              default: greedy
              type: string
            temperature:
              default: 0.0
              type: number
            top_k:
              default: 0
              type: integer
            top_p:
              default: 0.95
              type: number
          required:
          - temperature
          - strategy
          - top_p
          - top_k
          type: object
        stream:
          default: false
          type: boolean
      required:
      - message
      - model
      - message_history
      - sampling_params
      - available_tools
      - max_tokens
      - stream
      - logprobs
      type: object
    ChatCompletionResponse:
      additionalProperties: false
      properties:
        content:
          oneOf:
          - type: string
          - $ref: '#/components/schemas/Attachment'
          - items:
              oneOf:
              - type: string
              - $ref: '#/components/schemas/Attachment'
            type: array
        logprobs:
          additionalProperties:
            oneOf:
            - type: 'null'
            - type: boolean
            - type: number
            - type: string
            - type: array
            - type: object
          type: object
        stop_reason:
          enum:
          - not_stopped
          - finished_ok
          - max_tokens
          title: Stop reasons are used to indicate why the model stopped generating
            text.
          type: string
        tool_calls:
          items:
            additionalProperties: false
            properties:
              arguments:
                additionalProperties:
                  oneOf:
                  - type: 'null'
                  - type: boolean
                  - type: number
                  - type: string
                  - type: array
                  - type: object
                type: object
              tool_name:
                type: string
            required:
            - tool_name
            - arguments
            title: A tool call is a request to a tool.
            type: object
          type: array
      required:
      - content
      - tool_calls
      title: Normal chat completion response.
      type: object
    ChatCompletionResponseStreamChunk:
      additionalProperties: false
      properties:
        stop_reason:
          enum:
          - not_stopped
          - finished_ok
          - max_tokens
          title: Stop reasons are used to indicate why the model stopped generating
            text.
          type: string
        text_delta:
          type: string
        tool_call:
          additionalProperties: false
          properties:
            arguments:
              additionalProperties:
                oneOf:
                - type: 'null'
                - type: boolean
                - type: number
                - type: string
                - type: array
                - type: object
              type: object
            tool_name:
              type: string
          required:
          - tool_name
          - arguments
          title: A tool call is a request to a tool.
          type: object
      required:
      - text_delta
      title: Streamed chat completion response. The actual response is a series of
        such objects.
      type: object
    CompletionRequest:
      additionalProperties: false
      properties:
        content:
          oneOf:
          - type: string
          - $ref: '#/components/schemas/Attachment'
          - items:
              oneOf:
              - type: string
              - $ref: '#/components/schemas/Attachment'
            type: array
        logprobs:
          default: false
          type: boolean
        max_tokens:
          default: 0
          type: integer
        model:
          enum:
          - llama3_8b
          - llama3_70b
          type: string
        sampling_params:
          additionalProperties: false
          properties:
            strategy:
              default: greedy
              type: string
            temperature:
              default: 0.0
              type: number
            top_k:
              default: 0
              type: integer
            top_p:
              default: 0.95
              type: number
          required:
          - temperature
          - strategy
          - top_p
          - top_k
          type: object
        stream:
          default: false
          type: boolean
      required:
      - content
      - model
      - sampling_params
      - max_tokens
      - stream
      - logprobs
      type: object
    CompletionResponse:
      additionalProperties: false
      properties:
        content:
          oneOf:
          - type: string
          - $ref: '#/components/schemas/Attachment'
          - items:
              oneOf:
              - type: string
              - $ref: '#/components/schemas/Attachment'
            type: array
        logprobs:
          additionalProperties:
            oneOf:
            - type: 'null'
            - type: boolean
            - type: number
            - type: string
            - type: array
            - type: object
          type: object
        stop_reason:
          enum:
          - not_stopped
          - finished_ok
          - max_tokens
          title: Stop reasons are used to indicate why the model stopped generating
            text.
          type: string
      required:
      - content
      title: Normal completion response.
      type: object
    CompletionResponseStreamChunk:
      additionalProperties: false
      properties:
        logprobs:
          additionalProperties:
            oneOf:
            - type: 'null'
            - type: boolean
            - type: number
            - type: string
            - type: array
            - type: object
          type: object
        stop_reason:
          enum:
          - not_stopped
          - finished_ok
          - max_tokens
          title: Stop reasons are used to indicate why the model stopped generating
            text.
          type: string
        text_delta:
          type: string
      required:
      - text_delta
      title: streamed completion response.
      type: object
    Message:
      additionalProperties: false
      properties:
        content:
          oneOf:
          - type: string
          - $ref: '#/components/schemas/Attachment'
          - items:
              oneOf:
              - type: string
              - $ref: '#/components/schemas/Attachment'
            type: array
        role:
          enum:
          - system
          - user
          - assistant
          - tool
          type: string
        tool_calls:
          items:
            additionalProperties: false
            properties:
              arguments:
                additionalProperties:
                  oneOf:
                  - type: 'null'
                  - type: boolean
                  - type: number
                  - type: string
                  - type: array
                  - type: object
                type: object
              tool_name:
                type: string
            required:
            - tool_name
            - arguments
            title: A tool call is a request to a tool.
            type: object
          type: array
        tool_responses:
          items:
            additionalProperties: false
            properties:
              response:
                type: string
              tool_name:
                type: string
            required:
            - tool_name
            - response
            type: object
          type: array
      required:
      - role
      - content
      - tool_calls
      - tool_responses
      type: object
    ShieldConfig:
      additionalProperties: false
      properties:
        params:
          additionalProperties:
            oneOf:
            - type: 'null'
            - type: boolean
            - type: number
            - type: string
            - type: array
            - type: object
          type: object
        shield_type:
          enum:
          - llama_guard
          - prompt_guard
          - code_guard
          title: The type of safety shield.
          type: string
      required:
      - shield_type
      - params
      type: object
    URL:
      format: uri
      pattern: ^(https?://|file://|data:)
      type: string
info:
  description: This is the llama stack
  title: Llama Stack specification
  version: '0.1'
jsonSchemaDialect: https://json-schema.org/draft/2020-12/schema
openapi: 3.1.0
paths:
  /agentic_system/create:
    post:
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgenticSystemCreateRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AgenticSystemCreateResponse'
          description: OK
      tags:
      - AgenticSystem
  /agentic_system/delete:
    delete:
      parameters:
      - in: query
        name: agent_id
        required: true
        schema:
          type: string
      responses:
        '200':
          description: OK
      tags:
      - AgenticSystem
  /agentic_system/execute:
    post:
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AgenticSystemExecuteRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                oneOf:
                - $ref: '#/components/schemas/AgenticSystemExecuteResponse'
                - $ref: '#/components/schemas/AgenticSystemExecuteResponseStreamChunk'
          description: non-stream response from the agentic system. **OR** Streamed
            agent execution response.
      tags:
      - AgenticSystem
  /chat_completion:
    post:
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChatCompletionRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                oneOf:
                - $ref: '#/components/schemas/ChatCompletionResponse'
                - $ref: '#/components/schemas/ChatCompletionResponseStreamChunk'
          description: Normal chat completion response. **OR** Streamed chat completion
            response. The actual response is a series of such objects.
      tags:
      - Inference
  /completion:
    post:
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompletionRequest'
        required: true
      responses:
        '200':
          content:
            application/json:
              schema:
                oneOf:
                - $ref: '#/components/schemas/CompletionResponse'
                - $ref: '#/components/schemas/CompletionResponseStreamChunk'
          description: Normal completion response. **OR** streamed completion response.
      tags:
      - Inference
security:
- Default: []
servers:
- url: http://llama.meta.com
tags:
- name: AgenticSystem
- name: Inference
- description: <SchemaDefinition schemaRef="#/components/schemas/ShieldConfig" />
  name: ShieldConfig
- description: <SchemaDefinition schemaRef="#/components/schemas/AgenticSystemCreateRequest"
    />
  name: AgenticSystemCreateRequest
- description: <SchemaDefinition schemaRef="#/components/schemas/AgenticSystemCreateResponse"
    />
  name: AgenticSystemCreateResponse
- description: <SchemaDefinition schemaRef="#/components/schemas/AgenticSystemExecuteRequest"
    />
  name: AgenticSystemExecuteRequest
- description: 'A single turn in an interaction with an Agentic System.


    <SchemaDefinition schemaRef="#/components/schemas/AgenticSystemTurn" />'
  name: AgenticSystemTurn
- description: 'Attachments are used to refer to external resources, such as images,
    videos, audio, etc.


    <SchemaDefinition schemaRef="#/components/schemas/Attachment" />'
  name: Attachment
- description: <SchemaDefinition schemaRef="#/components/schemas/Message" />
  name: Message
- description: <SchemaDefinition schemaRef="#/components/schemas/URL" />
  name: URL
- description: 'non-stream response from the agentic system.


    <SchemaDefinition schemaRef="#/components/schemas/AgenticSystemExecuteResponse"
    />'
  name: AgenticSystemExecuteResponse
- description: 'Streamed agent execution response.


    <SchemaDefinition schemaRef="#/components/schemas/AgenticSystemExecuteResponseStreamChunk"
    />'
  name: AgenticSystemExecuteResponseStreamChunk
- description: <SchemaDefinition schemaRef="#/components/schemas/ChatCompletionRequest"
    />
  name: ChatCompletionRequest
- description: 'Normal chat completion response.


    <SchemaDefinition schemaRef="#/components/schemas/ChatCompletionResponse" />'
  name: ChatCompletionResponse
- description: 'Streamed chat completion response. The actual response is a series
    of such objects.


    <SchemaDefinition schemaRef="#/components/schemas/ChatCompletionResponseStreamChunk"
    />'
  name: ChatCompletionResponseStreamChunk
- description: <SchemaDefinition schemaRef="#/components/schemas/CompletionRequest"
    />
  name: CompletionRequest
- description: 'Normal completion response.


    <SchemaDefinition schemaRef="#/components/schemas/CompletionResponse" />'
  name: CompletionResponse
- description: 'streamed completion response.


    <SchemaDefinition schemaRef="#/components/schemas/CompletionResponseStreamChunk"
    />'
  name: CompletionResponseStreamChunk
x-tagGroups:
- name: Operations
  tags:
  - AgenticSystem
  - Inference
- name: Types
  tags:
  - AgenticSystemCreateRequest
  - AgenticSystemCreateResponse
  - AgenticSystemExecuteRequest
  - AgenticSystemExecuteResponse
  - AgenticSystemExecuteResponseStreamChunk
  - AgenticSystemTurn
  - Attachment
  - ChatCompletionRequest
  - ChatCompletionResponse
  - ChatCompletionResponseStreamChunk
  - CompletionRequest
  - CompletionResponse
  - CompletionResponseStreamChunk
  - Message
  - ShieldConfig
  - URL
